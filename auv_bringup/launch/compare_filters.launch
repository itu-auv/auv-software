<?xml version="1.0"?>
<launch>
  <arg name="namespace" default="taluy"/>
  <!-- Frequency set to 100.0 to be compatible with YAML -->
  <arg name="control_rate" default="100.0"/>
  
  <group ns="$(arg namespace)">
    <!-- EKF Node -->
    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_localization_node" clear_params="true">
      <rosparam command="load" file="$(find auv_bringup)/config/ekf.yaml"/>
      <!-- Remap outputs to avoid conflict -->
      <remap from="odometry/filtered" to="odometry/ekf"/>
      <remap from="accel/filtered" to="acceleration/ekf"/>
      
      <param name="disabled_at_startup" value="false" type="bool"/>
      <param name="frequency" value="$(arg control_rate)" type="double"/>
    </node>

     <!-- UKF Node -->
    <node pkg="robot_localization" type="ukf_localization_node" name="ukf_localization_node" clear_params="true">
      <rosparam command="load" file="$(find auv_bringup)/config/ukf.yaml"/>
      <remap from="odometry/filtered" to="odometry/ukf"/>
      <remap from="accel/filtered" to="acceleration/ukf"/>
      <param name="publish_tf" value="false"/>
    </node>

  </group>
</launch>