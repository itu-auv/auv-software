<?xml version="1.0"?>
<launch>
  <arg name="namespace" default="taluy" />
  <arg name="control_rate" default="20.0" />
  <arg name="dvl_virtual_port" default="/tmp/vcom0" />
  <arg name="use_gui" default="false" />
  <arg name="enable_logging" default="true" />
  <arg name="logging_directory" default="$(optenv HOME)/bags" />

  <rosparam file="$(find auv_bringup)/config/environment.yaml" command="load" ns="" />

  <!-- launch state publisher  -->
  <include file="$(find auv_bringup)/launch/inc/localization/start_state_publisher.launch.xml">
    <arg name="namespace" value="$(arg namespace)" />
    <arg name="use_gui" value="$(arg use_gui)" />
  </include>

  <include file="$(find auv_bringup)/launch/inc/$(arg namespace).launch">
    <arg name="namespace" value="$(arg namespace)" />
    <arg name="control_rate" value="$(arg control_rate)" />
    <arg name="dvl_virtual_port" value="$(arg dvl_virtual_port)" />
    <arg name="use_gui" value="$(arg use_gui)" />
    <arg name="enable_logging" value="$(arg enable_logging)" />
    <arg name="logging_directory" value="$(arg logging_directory)" />
  </include>

  <!-- launch cameras -->
  <include file="$(find auv_bringup)/launch/inc/sensors/start_cameras.launch.xml">
    <arg name="namespace" value="$(arg namespace)" />
  </include>

  <include file="$(find auv_bringup)/launch/inc/start_navigation.launch">
    <arg name="namespace" value="$(arg namespace)" />
    <arg name="control_rate" value="$(arg control_rate)" />
    <arg name="use_gui" value="$(arg use_gui)" />
    <arg name="config_file" value="$(find auv_bringup)/config/$(arg namespace)/control.yaml" />
  </include>

  <group if="$(arg enable_logging)">
    <include file="$(find auv_bringup)/launch/inc/logging.launch.xml">
      <arg name="namespace" value="$(arg namespace)" />
      <arg name="logging_directory" value="$(arg logging_directory)" />
    </include>
  </group>
</launch>
