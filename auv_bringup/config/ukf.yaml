frequency: 50 # UKF is heavier than EKF. 100Hz might be demanding on Jetson, I recommend 50Hz for starters. If there are no issues, you can increase it to 100.
sensor_timeout: 0.1
two_d_mode: false # Since it is an underwater vehicle, 3D (depth, pitch, roll) is important.
transform_time_offset: 0.0
transform_timeout: 0.0
print_diagnostics: true
debug: false
debug_out_file: /tmp/ukf_debug_log.txt

# Publication Settings
publish_tf: true
publish_acceleration: true
permit_corrected_publication: false

# Frame Settings (Specific to your system)
map_frame: map
odom_frame: odom
base_link_frame: taluy/base_link
world_frame: odom # Since there is no GPS, world_frame should be odom_frame.

# -------------------------------------------------------------------
# UKF SPECIFIC PARAMETERS
# -------------------------------------------------------------------
# Alpha and Kappa control the spread of sigma points.
# Beta relates to the distribution information (2.0 is ideal for Gaussian).
alpha: 0.05
kappa: 0.0
beta: 2.0

# -------------------------------------------------------------------
# INPUTS (SENSORS) - Matched exactly with your EKF file
# -------------------------------------------------------------------

# ODOM 0: IMU (Likely Orientation and Angular Velocities)
odom0: /taluy/localization/odom_imu
odom0_config: [false, false, false,
               true, true, false,
               false, false, false,
               true, true, true,
               false, false, false]
odom0_queue_size: 10
odom0_nodelay: false
odom0_differential: false
odom0_relative: false

# ODOM 1: Pressure Sensor (Only Z - Depth)
odom1: /taluy/localization/odom_pressure
odom1_config: [false, false, true,
               false, false, false,
               false, false, false,
               false, false, false,
               false, false, false]
odom1_queue_size: 10
odom1_nodelay: false
odom1_differential: false
odom1_relative: false

# ODOM 2: DVL (Doppler Velocity Log - Vx and Vy Velocities)
odom2: /taluy/localization/odom_dvl
odom2_config: [false, false, false,
               false, false, false,
               true, true, false,
               false, false, false,
               false, false, false]
odom2_queue_size: 10
odom2_nodelay: false
odom2_differential: false
odom2_relative: false

# ODOM 3: Second IMU (BNO)
odom3: /taluy/localization/odom_bno_imu
odom3_config: [false, false, false,
               true, true, false,
               false, false, false,
               true, true, true,
               false, false, false]
odom3_queue_size: 10
odom3_nodelay: false
odom3_differential: false
odom3_relative: false

# -------------------------------------------------------------------
# ADVANCED SETTINGS
# -------------------------------------------------------------------

use_control: false
stamped_control: false
control_timeout: 0.2
control_config: [true, false, false, false, false, true]
acceleration_limits: [1.3, 0.0, 0.0, 0.0, 0.0, 3.4]
deceleration_limits: [1.3, 0.0, 0.0, 0.0, 0.0, 4.5]
acceleration_gains: [0.8, 0.0, 0.0, 0.0, 0.0, 0.9]
deceleration_gains: [1.0, 0.0, 0.0, 0.0, 0.0, 1.0]

# Process Noise Covariance - Taken exactly from EKF.
# UKF can generally work with less noise, but EKF values are safest for starters.
process_noise_covariance: [0.05, 0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0.05, 0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0.06, 0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0.03, 0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0.03, 0,    0,     0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0.06, 0,     0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0.025, 0,     0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0.025, 0,    0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0.04, 0,    0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0,    0.01, 0,    0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0.01, 0,    0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0.02, 0,    0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0.01, 0,    0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0.01, 0,
                           0,    0,    0,    0,    0,    0,    0,     0,     0,    0,    0,    0,    0,    0,    0.015]

# We are using 1e-1 or 1e-2 instead of 1e-9.
initial_estimate_covariance: [1e-2, 0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    1e-2, 0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    1e-2, 0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0.1,  0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0.1,  0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0.1,  0,    0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    1e-2, 0,    0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    1e-2, 0,    0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    1e-2, 0,     0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    1e-2,  0,     0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     1e-2,  0,     0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     1e-2,  0,    0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     1e-2, 0,    0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    1e-2, 0,
                              0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    1e-2]
