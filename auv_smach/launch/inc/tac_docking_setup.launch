<?xml version="1.0" encoding="UTF-8"?>
<!-- TAC Docking task detection setup -->
<!-- Note: camera_detection_pose_estimator, object_map_tf_server, and visual_servoing_controller
     are already launched by auv_mapping/launch/start.launch via start_navigation.launch.
     ID remapping is handled via service call in docking.py (SET_ID_REMAP state). -->
<launch>
    <arg name="sim" default="false"/>
    <arg name="device" default="cuda:0"/>

    <!-- Docking-specific YOLO tracker -->
    <include file="$(find auv_detection)/launch/inc/tracker_docking.launch">
        <arg name="sim" value="$(arg sim)"/>
        <arg name="device" value="$(arg device)"/>
    </include>

    <!-- ArUco Board Pose Estimator for precision docking -->
    <node pkg="auv_vision" type="aruco_grid_pose_estimator_debug.py"
          name="aruco_board_estimator" output="screen">
        <param name="camera_ns" value="taluy/cameras/cam_bottom"/>
        <param name="camera_frame" value="taluy/base_link/bottom_camera_optical_link"/>
    </node>

    <!-- Static TF: approach target 1m above docking_station -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="docking_approach_tf"
          args="0 0 1.0 0 0 0 docking_station docking_approach_target"/>

    <!-- Static TF: puck target position -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="docking_puck_target_tf"
          args="0 -0.005 0.07 0 0 0 docking_station docking_puck_target"/>
</launch>
